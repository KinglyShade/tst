<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Generador de Boss YAML - Compatibilidad 4.0.0/4.1.0</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/js-yaml@4/dist/js-yaml.min.js"></script>
  <style>
    body {
      background-color: #111827;
      color: #f3f4f6;
    }
    .section-card {
      background: linear-gradient(145deg, #1f2937 0%, #111827 100%);
      border-radius: 10px;
      border: 1px solid #374151;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.25);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .section-card:hover {
      box-shadow: 0 10px 15px rgba(0, 0, 0, 0.3);
      transform: translateY(-2px);
      border-color: #3b82f6;
    }
    .section-header {
      background: linear-gradient(to right, #1e40af, #1e3a8a);
      border-top-left-radius: 10px;
      border-top-right-radius: 10px;
      border-bottom: 1px solid #374151;
    }
    .input-field {
      background-color: #1f2937;
      border: 1px solid #374151;
      color: #f3f4f6;
      transition: all 0.2s ease;
    }
    .input-field:focus {
      border-color: #3b82f6;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
      background-color: #111827;
    }
    .checkbox-field {
      background-color: #1f2937;
      border: 1px solid #374151;
    }
    .checkbox-field:checked {
      background-color: #3b82f6;
      border-color: #3b82f6;
    }
    .version-badge {
      position: absolute;
      top: 10px;
      right: 10px;
      background: linear-gradient(to right, #1e40af, #1e3a8a);
      color: white;
      padding: 3px 8px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: bold;
    }
    .version-switch {
      position: absolute;
      top: 10px;
      left: 10px;
    }
    ::selection {
      background: #3b82f6;
      color: white;
    }
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    ::-webkit-scrollbar-track {
      background: #1f2937;
    }
    ::-webkit-scrollbar-thumb {
      background: #3b82f6;
      border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: #2563eb;
    }
  </style>
</head>
<body class="min-h-screen p-6 font-sans">
  <div class="max-w-7xl mx-auto relative">
    <!-- Version Switch -->
    <div class="version-switch">
      <div class="inline-flex rounded-md shadow-sm" role="group">
        <button id="version-400" type="button" class="px-4 py-2 text-sm font-medium rounded-l-lg bg-gray-700 text-white border border-gray-600 hover:bg-gray-600 focus:z-10 focus:ring-2 focus:ring-blue-500">
          Versión 4.0.0
        </button>
        <button id="version-410" type="button" class="px-4 py-2 text-sm font-medium rounded-r-lg bg-blue-600 text-white border border-blue-500 hover:bg-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-500">
          Versión 4.1.0
        </button>
      </div>
    </div>

    <!-- Header -->
    <div class="text-center mb-12">
      <h1 class="text-4xl font-bold text-white mb-4">
        <span class="bg-gradient-to-r from-blue-500 to-blue-700 text-transparent bg-clip-text">Generador de Boss YAML</span>
      </h1>
      <p class="text-gray-400 max-w-2xl mx-auto">Crea configuraciones compatibles con versiones 4.0.0 y 4.1.0</p>
    </div>

    <!-- Main Container -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <!-- Left Column -->
      <div class="lg:col-span-2 space-y-6">
        <!-- Basic Config Section -->
        <div class="section-card">
          <div class="section-header p-5">
            <h2 class="text-xl font-bold text-white flex items-center">
              <svg class="w-5 h-5 mr-3 text-blue-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
              </svg>
              Configuración Básica
            </h2>
            <span id="version-badge" class="version-badge">v4.1.0</span>
          </div>
          <div class="p-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">Clave única YAML</label>
                <input id="key" type="text" required placeholder="ej: ender_dragon" 
                       class="input-field w-full px-4 py-3 rounded-lg focus:ring-2 focus:ring-blue-500">
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">boss-id</label>
                <input id="boss-id" type="text" required 
                       class="input-field w-full px-4 py-3 rounded-lg focus:ring-2 focus:ring-blue-500">
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">level</label>
                <input id="level" type="number" min="1" value="1" 
                       class="input-field w-full px-4 py-3 rounded-lg focus:ring-2 focus:ring-blue-500">
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">mob-type</label>
                <input id="mob-type" type="text" 
                       class="input-field w-full px-4 py-3 rounded-lg focus:ring-2 focus:ring-blue-500">
              </div>
            </div>
            
            <div class="mt-6">
              <label class="block text-sm font-medium text-gray-300 mb-3">Opciones</label>
              <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
                <label class="flex items-center space-x-3">
                  <input id="enabled" type="checkbox" class="checkbox-field h-4 w-4 rounded focus:ring-blue-500">
                  <span class="text-sm text-gray-300">enabled</span>
                </label>
                <label class="flex items-center space-x-3">
                  <input id="fire_damage" type="checkbox" class="checkbox-field h-4 w-4 rounded focus:ring-blue-500">
                  <span class="text-sm text-gray-300">fire_damage</span>
                </label>
                <label class="flex items-center space-x-3">
                  <input id="custom-ai" type="checkbox" class="checkbox-field h-4 w-4 rounded focus:ring-blue-500">
                  <span class="text-sm text-gray-300">custom-ai</span>
                </label>
                <label class="flex items-center space-x-3">
                  <input id="attack" type="checkbox" checked class="checkbox-field h-4 w-4 rounded focus:ring-blue-500">
                  <span class="text-sm text-gray-300">attack</span>
                </label>
              </div>
            </div>

            <!-- Version 4.0.0 specific field -->
            <div id="chance-field" class="mt-6 hidden">
              <label class="block text-sm font-medium text-gray-300 mb-2">chance</label>
              <input id="chance" type="number" min="0" max="100" value="0" 
                     class="input-field w-full px-4 py-3 rounded-lg focus:ring-2 focus:ring-blue-500">
            </div>
          </div>
        </div>

        <!-- Stats Section -->
        <div class="section-card">
          <div class="section-header p-5">
            <h2 class="text-xl font-bold text-white flex items-center">
              <svg class="w-5 h-5 mr-3 text-blue-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
              </svg>
              Estadísticas
            </h2>
          </div>
          <div class="p-6">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
              <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">display-name</label>
                <input id="display-name" type="text" 
                       class="input-field w-full px-4 py-3 rounded-lg focus:ring-2 focus:ring-blue-500">
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">Skin</label>
                <input id="Skin" type="text" 
                       class="input-field w-full px-4 py-3 rounded-lg focus:ring-2 focus:ring-blue-500">
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">health</label>
                <input id="health" type="number" min="1" value="100" 
                       class="input-field w-full px-4 py-3 rounded-lg focus:ring-2 focus:ring-blue-500">
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">attack-damage</label>
                <input id="attack-damage" type="number" min="0" value="10" 
                       class="input-field w-full px-4 py-3 rounded-lg focus:ring-2 focus:ring-blue-500">
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">movement-speed</label>
                <input id="movement-speed" type="number" step="0.01" value="0.2" 
                       class="input-field w-full px-4 py-3 rounded-lg focus:ring-2 focus:ring-blue-500">
              </div>
            </div>
          </div>
        </div>

        <!-- Spawn Section -->
        <div class="section-card">
          <div class="section-header p-5">
            <h2 class="text-xl font-bold text-white flex items-center">
              <svg class="w-5 h-5 mr-3 text-blue-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
              </svg>
              Configuración de Spawn
            </h2>
          </div>
          <div class="p-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
              <div class="flex items-center">
                <input id="activespawnInterval" type="checkbox" class="checkbox-field h-4 w-4 rounded focus:ring-blue-500">
                <label for="activespawnInterval" class="ml-3 block text-sm text-gray-300">activespawnInterval</label>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">spawnInterval</label>
                <input id="spawnInterval" type="number" min="0" value="1000" 
                       class="input-field w-full px-4 py-3 rounded-lg focus:ring-2 focus:ring-blue-500">
              </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
              <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">spawn-message</label>
                <input id="spawn-message" type="text" 
                       class="input-field w-full px-4 py-3 rounded-lg focus:ring-2 focus:ring-blue-500">
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">spawn-sound</label>
                <input id="spawn-sound" type="text" 
                       class="input-field w-full px-4 py-3 rounded-lg focus:ring-2 focus:ring-blue-500">
              </div>
            </div>

            <div class="flex items-center mb-6">
              <input id="spawnZone" type="checkbox" class="checkbox-field h-4 w-4 rounded focus:ring-blue-500">
              <label for="spawnZone" class="ml-3 block text-sm font-medium text-gray-300">spawnZone (custom)</label>
            </div>

            <div id="spawnzone-settings" class="bg-gray-900 p-5 rounded-lg border border-gray-800">
              <div class="grid grid-cols-1 sm:grid-cols-4 gap-4">
                <div>
                  <label class="block text-xs font-medium text-gray-400 mb-2">World</label>
                  <input id="loc-world" type="text" 
                         class="input-field w-full px-3 py-2 rounded-md text-sm focus:ring-2 focus:ring-blue-500">
                </div>
                <div>
                  <label class="block text-xs font-medium text-gray-400 mb-2">X</label>
                  <input id="loc-x" type="number" 
                         class="input-field w-full px-3 py-2 rounded-md text-sm focus:ring-2 focus:ring-blue-500">
                </div>
                <div>
                  <label class="block text-xs font-medium text-gray-400 mb-2">Y</label>
                  <input id="loc-y" type="number" 
                         class="input-field w-full px-3 py-2 rounded-md text-sm focus:ring-2 focus:ring-blue-500">
                </div>
                <div>
                  <label class="block text-xs font-medium text-gray-400 mb-2">Z</label>
                  <input id="loc-z" type="number" 
                         class="input-field w-full px-3 py-2 rounded-md text-sm focus:ring-2 focus:ring-blue-500">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Column -->
      <div class="space-y-6">
        <!-- Respawn Section -->
        <div class="section-card">
          <div class="section-header p-5">
            <h2 class="text-xl font-bold text-white flex items-center">
              <svg class="w-5 h-5 mr-3 text-blue-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              Respawn
            </h2>
          </div>
          <div class="p-6">
            <div class="flex items-center mb-6">
              <input id="allowBossRespawn" type="checkbox" class="checkbox-field h-4 w-4 rounded focus:ring-blue-500">
              <label for="allowBossRespawn" class="ml-3 block text-sm font-medium text-gray-300">allowBossRespawn</label>
            </div>

            <div id="respawn-settings" class="space-y-6">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                  <label class="block text-sm font-medium text-gray-300 mb-2">MaxRespawn</label>
                  <input id="MaxRespawn" type="number" min="0" value="1" 
                         class="input-field w-full px-4 py-3 rounded-lg focus:ring-2 focus:ring-blue-500">
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-300 mb-2">respawnInterval</label>
                  <input id="respawnInterval" type="number" min="0" value="1800" 
                         class="input-field w-full px-4 py-3 rounded-lg focus:ring-2 focus:ring-blue-500">
                </div>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">RespawnMessages</label>
                <textarea id="RespawnMessages" rows="3" 
                          class="input-field w-full px-4 py-3 rounded-lg focus:ring-2 focus:ring-blue-500"></textarea>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">bossRespawnMessage</label>
                <input id="bossRespawnMessage" type="text" 
                       class="input-field w-full px-4 py-3 rounded-lg focus:ring-2 focus:ring-blue-500">
              </div>
            </div>
          </div>
        </div>

        <!-- Equipment Section -->
        <div class="section-card">
          <div class="section-header p-5">
            <div class="flex justify-between items-center">
              <h2 class="text-xl font-bold text-white flex items-center">
                <svg class="w-5 h-5 mr-3 text-blue-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
                </svg>
                Equipment
              </h2>
              <label class="inline-flex items-center">
                <input id="enable-equipment" type="checkbox" class="checkbox-field h-4 w-4 rounded focus:ring-blue-500">
                <span class="ml-3 text-sm text-gray-300">Habilitar</span>
              </label>
            </div>
          </div>
          <div id="equipment-section" class="p-6">
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <div>
                <label class="block text-xs font-medium text-gray-400 mb-2">Main-hand</label>
                <input id="equip-main-hand" type="text" 
                       class="input-field w-full px-3 py-2 rounded-md text-sm focus:ring-2 focus:ring-blue-500">
              </div>
              <div>
                <label class="block text-xs font-medium text-gray-400 mb-2">Off-hand</label>
                <input id="equip-off-hand" type="text" 
                       class="input-field w-full px-3 py-2 rounded-md text-sm focus:ring-2 focus:ring-blue-500">
              </div>
              <div>
                <label class="block text-xs font-medium text-gray-400 mb-2">Helmet</label>
                <input id="equip-helmet" type="text" 
                       class="input-field w-full px-3 py-2 rounded-md text-sm focus:ring-2 focus:ring-blue-500">
              </div>
              <div>
                <label class="block text-xs font-medium text-gray-400 mb-2">Chestplate</label>
                <input id="equip-chestplate" type="text" 
                       class="input-field w-full px-3 py-2 rounded-md text-sm focus:ring-2 focus:ring-blue-500">
              </div>
              <div>
                <label class="block text-xs font-medium text-gray-400 mb-2">Leggings</label>
                <input id="equip-leggings" type="text" 
                       class="input-field w-full px-3 py-2 rounded-md text-sm focus:ring-2 focus:ring-blue-500">
              </div>
              <div>
                <label class="block text-xs font-medium text-gray-400 mb-2">Boots</label>
                <input id="equip-boots" type="text" 
                       class="input-field w-full px-3 py-2 rounded-md text-sm focus:ring-2 focus:ring-blue-500">
              </div>
            </div>
          </div>
        </div>

        <!-- Particles Section -->
        <div class="section-card">
          <div class="section-header p-5">
            <h2 class="text-xl font-bold text-white flex items-center">
              <svg class="w-5 h-5 mr-3 text-blue-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
              </svg>
              Partículas
            </h2>
          </div>
          <div class="p-6">
            <div class="flex items-center mb-6">
              <input id="particles-active" type="checkbox" class="checkbox-field h-4 w-4 rounded focus:ring-blue-500">
              <label class="ml-3 block text-sm font-medium text-gray-300">particles.active</label>
            </div>
            <div class="grid grid-cols-1 gap-6">
              <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">Particle event</label>
                <input id="particles-event" type="text" placeholder="spawn/death/attack" 
                       class="input-field w-full px-4 py-3 rounded-lg focus:ring-2 focus:ring-blue-500">
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">Particle type</label>
                <input id="particles-particle" type="text" 
                       class="input-field w-full px-4 py-3 rounded-lg focus:ring-2 focus:ring-blue-500">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Bottom Sections -->
    <div class="mt-8 grid grid-cols-1 lg:grid-cols-2 gap-6">
      <!-- Attacks Section -->
      <div class="section-card">
        <div class="section-header p-5">
          <h2 class="text-xl font-bold text-white flex items-center">
            <svg class="w-5 h-5 mr-3 text-blue-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path>
            </svg>
            Ataques
          </h2>
        </div>
        <div class="p-6">
          <label class="block text-sm font-medium text-gray-300 mb-2">Attacks (uno por línea)</label>
          <textarea id="attacks" rows="4" 
                    class="input-field w-full px-4 py-3 rounded-lg focus:ring-2 focus:ring-blue-500"></textarea>
        </div>
      </div>

      <!-- Rewards Section -->
      <div class="section-card">
        <div class="section-header p-5">
          <h2 class="text-xl font-bold text-white flex items-center">
            <svg class="w-5 h-5 mr-3 text-blue-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v13m8-8v7m-16-7v7m8-12a3 3 0 100-6 3 3 0 000 6z"></path>
            </svg>
            Recompensas
          </h2>
        </div>
        <div class="p-6">
          <div id="rewards-container" class="space-y-4">
            <!-- reward template -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 bg-gray-900 p-4 rounded-lg border border-gray-800 items-end">
              <div>
                <label class="block text-xs font-medium text-gray-400 mb-2">Key</label>
                <input name="reward-key" type="text" placeholder="top_1" 
                       class="input-field w-full px-3 py-2 rounded-md text-sm focus:ring-2 focus:ring-blue-500">
              </div>
              <div>
                <label class="block text-xs font-medium text-gray-400 mb-2">Type</label>
                <select class="input-field w-full px-3 py-2 rounded-md text-sm focus:ring-2 focus:ring-blue-500 reward-type">
                  <option value="item">item</option>
                  <option value="itemgroup">itemgroup</option>
                  <option value="command">command</option>
                  <!-- Version 4.0.0 specific option -->
                  <option value="denarius" class="v400-only hidden">denarius</option>
                </select>
              </div>
              <div class="reward-item">
                <label class="block text-xs font-medium text-gray-400 mb-2">Item/Group</label>
                <input type="text" class="input-field w-full px-3 py-2 rounded-md text-sm focus:ring-2 focus:ring-blue-500 reward-value">
              </div>
              <div class="reward-amount">
                <label class="block text-xs font-medium text-gray-400 mb-2">Amount</label>
                <input type="number" min="1" value="1" 
                       class="input-field w-full px-3 py-2 rounded-md text-sm focus:ring-2 focus:ring-blue-500 reward-amount-input">
              </div>
            </div>
          </div>
          
          <button id="add-reward" type="button" class="mt-4 flex items-center text-blue-400 hover:text-blue-300 transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd" />
            </svg>
            Añadir recompensa
          </button>
        </div>
      </div>
    </div>

    <!-- Triggers Section (Version 4.1.0 only) -->
    <div id="triggers-section" class="mt-8 section-card">
      <div class="section-header p-5">
        <h2 class="text-xl font-bold text-white flex items-center">
          <svg class="w-5 h-5 mr-3 text-blue-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
          </svg>
          Triggers
        </h2>
      </div>
      <div class="p-6">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label class="block text-sm font-medium text-gray-300 mb-2">on_defeat</label>
            <input id="trigger-defeat" type="text" 
                   class="input-field w-full px-4 py-3 rounded-lg focus:ring-2 focus:ring-blue-500">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-300 mb-2">on_invoke</label>
            <input id="trigger-invoke" type="text" 
                   class="input-field w-full px-4 py-3 rounded-lg focus:ring-2 focus:ring-blue-500">
          </div>
        </div>
      </div>
    </div>

    <!-- Output Section -->
    <div class="mt-8 section-card">
      <div class="section-header p-5">
        <div class="flex justify-between items-center">
          <h2 class="text-xl font-bold text-white flex items-center">
            <svg class="w-5 h-5 mr-3 text-blue-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
            </svg>
            YAML Generado
          </h2>
          <button id="generate-btn" class="inline-flex items-center px-5 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors">
            Generar
          </button>
        </div>
      </div>
      <div class="p-6">
        <pre id="output" class="bg-gray-900 text-gray-200 p-5 rounded-lg overflow-x-auto text-sm font-mono border border-gray-800"></pre>
        <a id="download-link" href="#" download="boss.yml" class="mt-5 inline-flex items-center px-5 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors hidden">
          <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
          </svg>
          Descargar YAML
        </a>
      </div>
    </div>
  </div>

  <script>
    // Current version (default: 4.1.0)
    let currentVersion = '4.1.0';
    
    // Toggle sections based on version
    function toggleVersionFields() {
  if (currentVersion === '4.0.0') {
    // Mostrar elementos exclusivos de 4.0.0
    document.querySelectorAll('.v410-only').forEach(el => el.classList.add('hidden'));
    // Ocultar elementos exclusivos de 4.1.0
    document.getElementById('triggers-section').classList.add('hidden');
  } else {
    // Ocultar elementos exclusivos de 4.0.0
    document.querySelectorAll('.v410-only').forEach(el => el.classList.remove('hidden'));
    // Mostrar elementos exclusivos de 4.1.0
    document.getElementById('triggers-section').classList.remove('hidden');
  }
  document.getElementById('version-badge').textContent = `v${currentVersion}`;
}
    
    // Initialize version switch
    document.addEventListener('DOMContentLoaded', () => {
      // Set up version toggle buttons
      document.getElementById('version-400').addEventListener('click', () => {
        currentVersion = '4.0.0';
        document.getElementById('version-400').classList.remove('bg-gray-700');
        document.getElementById('version-400').classList.add('bg-blue-600');
        document.getElementById('version-410').classList.remove('bg-blue-600');
        document.getElementById('version-410').classList.add('bg-gray-700');
        toggleVersionFields();
      });
      
      document.getElementById('version-410').addEventListener('click', () => {
        currentVersion = '4.1.0';
        document.getElementById('version-410').classList.remove('bg-gray-700');
        document.getElementById('version-410').classList.add('bg-blue-600');
        document.getElementById('version-400').classList.remove('bg-blue-600');
        document.getElementById('version-400').classList.add('bg-gray-700');
        toggleVersionFields();
      });
      
      // Initialize with 4.1.0 selected
      document.getElementById('version-410').click();
      
      // Toggle sections
      function toggleSection(checkboxId, sectionId) {
        const cb = document.getElementById(checkboxId);
        const sec = document.getElementById(sectionId);
        if (cb && sec) {
          sec.style.display = cb.checked ? 'block' : 'none';
        }
      }
      
      // Initialize sections
      const toggleConfig = {
        'allowBossRespawn': 'respawn-settings',
        'spawnZone': 'spawnzone-settings',
        'enable-equipment': 'equipment-section'
      };
      
      Object.entries(toggleConfig).forEach(([id, sectionId]) => {
        const cb = document.getElementById(id);
        if (cb) {
          toggleSection(id, sectionId);
          cb.addEventListener('change', () => toggleSection(id, sectionId));
        }
      });
      
      // Rewards dynamic
      const container = document.getElementById('rewards-container');
      if (container) {
        document.getElementById('add-reward').addEventListener('click', () => {
          const tpl = container.firstElementChild.cloneNode(true);
          tpl.querySelectorAll('input').forEach(i => i.value = '');
          container.appendChild(tpl);
        });
        
        container.addEventListener('change', e => {
          if (e.target.classList.contains('reward-type')) {
            const row = e.target.closest('.grid');
            const type = e.target.value;
            const itemLabel = row.querySelector('.reward-item label');
            const amountDiv = row.querySelector('.reward-amount');
            
            if (type === 'command') {
              itemLabel.textContent = 'Command:';
              if (amountDiv) amountDiv.style.display = 'none';
            } else {
              itemLabel.textContent = type === 'item' ? 'Item:' : 'Item Group:';
              if (amountDiv) amountDiv.style.display = 'block';
            }
          }
        });
      }
      
      // Generate YAML
      document.getElementById('generate-btn').addEventListener('click', generateYAML);
    });
    
    function generateYAML() {
      const key = document.getElementById('key').value.trim();
      const getList = name => document.getElementById(name).value.split('\n').filter(l => l.trim());
      
      const location = document.getElementById('spawnZone').checked ? { 
        world: document.getElementById('loc-world').value, 
        coordinates: { 
          x: +document.getElementById('loc-x').value, 
          y: +document.getElementById('loc-y').value, 
          z: +document.getElementById('loc-z').value 
        } 
      } : { world: 'world', coordinates: { x: 0, y: 0, z: 0 } };
      
      // Build boss object based on version
      const boss = {
        'boss-id': document.getElementById('boss-id').value,
        level: +document.getElementById('level').value,
        enabled: document.getElementById('enabled').checked,
        fire_damage: document.getElementById('fire_damage').checked,
        'custom-ai': document.getElementById('custom-ai').checked,
        attack: document.getElementById('attack').checked,
        allowBossRespawn: document.getElementById('allowBossRespawn').checked,
        MaxRespawn: +document.getElementById('MaxRespawn').value,
        RespawnMessages: getList('RespawnMessages'),
        respawnInterval: +document.getElementById('respawnInterval').value,
        activespawnInterval: document.getElementById('activespawnInterval').checked,
        spawnInterval: +document.getElementById('spawnInterval').value,
        spawnZone: document.getElementById('spawnZone').checked,
        'spawn-message': document.getElementById('spawn-message').value,
        'spawn-sound': document.getElementById('spawn-sound').value,
        location,
        'mob-type': document.getElementById('mob-type').value,
        'display-name': document.getElementById('display-name').value,
        Skin: document.getElementById('Skin').value,
        'attack-damage': +document.getElementById('attack-damage').value,
        health: +document.getElementById('health').value,
        'movement-speed': +document.getElementById('movement-speed').value,
        'enable-equipment': document.getElementById('enable-equipment').checked,
        equipment: document.getElementById('enable-equipment').checked ? {
          'main-hand': document.getElementById('equip-main-hand').value,
          'off-hand': document.getElementById('equip-off-hand').value,
          helmet: document.getElementById('equip-helmet').value,
          chestplate: document.getElementById('equip-chestplate').value,
          leggings: document.getElementById('equip-leggings').value,
          boots: document.getElementById('equip-boots').value
        } : {},
        bossRespawnMessage: document.getElementById('bossRespawnMessage').value,
        particles_options: { active: document.getElementById('particles-active').checked },
        particles: { 
          event: document.getElementById('particles-event').value, 
          particle: document.getElementById('particles-particle').value 
        },
        attacks: getList('attacks'),
        rewards: {} 
      };
      
      // Add version-specific fields
      if (currentVersion === '4.0.0') {
        boss.chance = +document.getElementById('chance').value;
      } else {
        boss.triggers = {
          on_defeat: document.getElementById('trigger-defeat').value,
          on_invoke: document.getElementById('trigger-invoke').value
        };
      }
      
      // Process rewards
      document.querySelectorAll('#rewards-container .grid').forEach(row => {
        const rkey = row.querySelector('input[name="reward-key"]').value;
        if (!rkey) return;
        
        const type = row.querySelector('.reward-type').value;
        const value = row.querySelector('.reward-value').value;
        const amount = row.querySelector('.reward-amount-input')?.value;
        
        if (currentVersion === '4.0.0') {
          boss.rewards[rkey] = { 
            reward: { type }
          };
          if (type === 'command') {
            boss.rewards[rkey].reward.commands = [value];
          } else if (type === 'item') {
            boss.rewards[rkey].reward.item = value;
            boss.rewards[rkey].reward.amount = +amount;
          } else {
            boss.rewards[rkey].reward.itemgroup = value;
            boss.rewards[rkey].reward.amount = +amount;
          }
        } else {
          boss.rewards[rkey] = { type };
          if (type === 'command') {
            boss.rewards[rkey].commands = [value];
          } else if (type === 'item') {
            boss.rewards[rkey].item = value;
            boss.rewards[rkey].amount = +amount;
          } else if (type === 'denarius') {
            boss.rewards[rkey].reward.item = value;
            boss.rewards[rkey].reward.amount = +amount;
          } else {
            boss.rewards[rkey].itemgroup = value;
            boss.rewards[rkey].amount = +amount;
          }
        }
      });
      
      const full = { 
        BossVersion: currentVersion === '4.0.0' ? '0.5' : '0.5',
        bosses: { [key]: boss } 
      };
      
      const yaml = jsyaml.dump(full, { noRefs: true, sortKeys: false });
      
      // Display and make downloadable
      document.getElementById('output').textContent = yaml;
      
      const blob = new Blob([yaml], { type: 'text/yaml' });
      const downloadLink = document.getElementById('download-link');
      downloadLink.href = URL.createObjectURL(blob);
      downloadLink.classList.remove('hidden');
    }
  </script>
</body>
</html>